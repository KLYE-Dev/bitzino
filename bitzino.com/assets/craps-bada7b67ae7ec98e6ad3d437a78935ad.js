$(document).ready(function(){Table.setup("craps")}),function(e,t,n){function f(e){var n=e.hasClass("active");t("#board .info").hide(),t(".w").removeClass("active"),t("#table").unbind("click",l),e.find(".info").show(),e.addClass("active"),setTimeout(function(){t("#table").bind("click",l)},0);var r=e.attr("data-name"),s=e.find("input[type=text]"),o=p(e,s);s.attr("data-max",o),e.find(".max .value").text(o);if(n||!i[r]){var u=parseInt(t("#craps_table_bet").val(),10);c(e,Math.min(o,(i[r]||0)+u))}s.is(":disabled")||s.val(i[r]),navigator.userAgent.search(/ipad|ipod|iphone|android/i)==-1&&s.select()}function l(){t("#board .info").hide(),t(".w").removeClass("active"),t("#table").unbind("click",l)}function c(n,r){t(".visbet.collected").removeClass("collected").text("").hide(),t(".visbet.unremoved").remove();if(n.hasClass("disabled"))return;var a=n.attr("data-name");u-=i[a]||0,i[a]=r,u+=r;var f=n.find(".visbet");f.stop(!1,!0),r>0?(f.show(),f.text(r),h(f,r)):(f.hide(),f.text("")),e.setStake(s-u+o),d(!0)}function h(e,t){var n=(t+"").length;e.removeClass("small smaller smallest"),n>6?e.addClass("smallest"):n>5?e.addClass("smaller"):n>4&&e.addClass("small")}function p(e,t){if(e.hasClass("disabled"))return parseInt(t.val()||0,10);var n=parseInt(e.attr("data-max"),10)||s-u;return Math.min(n,s-u)}function d(e){var n=e&&(u>0||a>0),r=e&&u>0;n?(t("#bet").find("input[type=submit]").removeAttr("disabled"),t("#bet").removeClass("disabled")):(t("#bet").find("input[type=submit]").attr("disabled","disabled"),t("#bet").addClass("disabled")),r?(t("#clear").find("input[type=submit]").removeAttr("disabled"),t("#clear").removeClass("disabled")):(t("#clear").find("input[type=submit]").attr("disabled","disabled"),t("#clear").addClass("disabled"))}function v(e){var n={},r=t("#board").attr(e),i=r.split(";");for(var s=0,o;o=i[s];s++){var u=o.split(":");n[u[0]]=parseInt(u[1],10)}return n}function m(){t("#board .info").click(function(){return!1}),t(".w").click(function(){f(t(this))}),t(".w input[type=text]").bind("change keydown",function(){var e=t(this);window.setTimeout(function(){Z.checkAmount(e,0),c(e.parents(".w"),parseInt(e.val()),10)},0)}),t(".w input[type=text]").keydown(Z.numberKeydownHandler),t(".w input[type=text]").keydown(function(e){e.which==13&&l()}),t(".w .info .heading,.w .info .label,.w .info .arrow,.w .info .mask").click(l),t(".w .clear").click(function(){l(),t(this).parents(".w").find("input[type=text]").val(0),c(t(this).parents(".w"),0)}),t(".w .double").click(function(){var e=t(this).parents(".w").find("input[type=text]");Z.multiplyAmount(e,2),c(t(this).parents(".w"),parseInt(e.val(),10))}),t(".w .plus_1").click(function(){var e=t(this).parents(".w").find("input[type=text]");Z.addAmount(e,1),c(t(this).parents(".w"),parseInt(e.val(),10))}),t("#clear").click(function(){u=0,i={},t(".w").not(".disabled").find(".visbet").text("").hide(),e.setStake(s-u+o),d(!0)})}function g(e,t,n,r){e.removeClass("die1 die2 die3 die4 die5 die6"),n&&t>=n?(e.addClass("die"+r),Z.dequeue()):(e.addClass("die"+Math.floor(Math.random()*6+1)),window.setTimeout(function(){g(e,t+1,n,r)},25))}function y(){var e=[];for(key in i)i[key]&&e.push(key+":"+i[key]);return e.join(";")}var r,i={},s,o,u,a;e.animate=function(n,f,l,c,p){r=p*5/3,m(),a=Number(t("#board").attr("data-active_bet_amount")),roll=(t("#board").attr("data-roll")||"").split(","),i=v("data-wagers");var y=(l+"").split(".");s=Number(y[0]),o=Number("."+(y[1]||0)),u=0;for(key in i)u+=i[key];Z.enqueue(function(){t("#dice").size()==0||t("#dice").hasClass("rolled")?(Z.dequeue(),Z.dequeue()):t("#dice .die").each(function(e,n){window.setTimeout(function(){g(t(n),0,6+Math.floor(Math.random()*20),roll[e])},0)})},2),Z.enqueue(function(){t("#dice").addClass("rolled"),t(".point_off.unremoved,.point_on.unremoved").fadeOut(r*2),t(".point_off.unset,.point_on.unset").fadeIn(r*2),Z.dequeue()}),Z.enqueue(function(){t(".status").fadeIn(r),t(".visbet.lose").delay(150).fadeOut(r*2,Z.dequeue),t(".visbet.win").addClass("collected"),t(".visbet.win").each(function(e,n){var i=t(n),s=i.find(".value"),o=Number(s.text()),u=Number(i.find(".winnings").text());t({value:o}).animate({value:o+u},{duration:r,easing:"swing",step:function(){s.text(Math.ceil(this.value))},complete:function(){h(i,o+u),s.text(o+u),Z.dequeue()}})}),t(".visbet .winnings").show(),t(".visbet .winnings").addClass("final",r*2)},t(".visbet.win").size()+t(".visbet.lose").size()),Z.enqueue(function(){t(".tmp_disabled").removeClass("tmp_disabled"),t(".tmp_enabled").removeClass("tmp_enabled"),Z.dequeue()}),Z.enqueue(function(){t(".visbet.unmoved").removeClass("unmoved",r*2,Z.dequeue)},t(".visbet.unmoved").size()),Z.enqueue(function(){t("#roll_mask").hide(),t("#bet").find("input[type=submit]").attr("value","Roll"),d(!0),t(".visbet .winnings").fadeOut(r),e.animateGeneral(s-u+o),Z.dequeue()}),Z.startDequeue()},e.animateOut=function(){d(!1),t(".status").hide(),t("#craps_table_wagers").val(y()),t("#craps_table_bet_per_click").val(t("#craps_table_bet").val()),t("#dice").removeClass("rolled"),t("#roll_mask").show(),t("#dice .die").each(function(e,n){window.setTimeout(function(){g(t(n),0)},0)})}}(window.Table=window.Table||{},jQuery);